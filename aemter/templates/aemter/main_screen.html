{% extends 'base.html' %}

{% block content %}



<div class="row">
  <div class="col s12">
    <h3>Ã„mter</h3>
  </div>

  <div class="col s12">
    <ul class="collapsible">
      <!-- Append collapsible for each "referat" -->
      {% for referat in referate %}
        <li>
          <div class="collapsible-header grey lighten-2">Referat "{{referat.bezeichnung}}"</div>
        </li>
      {% endfor %}
    </ul>
  </div>

  <div class="col s12">
    <ul class="collapsible">
      {% for referat in referate_set %}
      <li>
        <div class="collapsible-header grey lighten-2">{{referat.name}}</div>
        <div class="collapsible-body">
          <span>
            <table>
              <tbody>
                <tr>
                  <td witdth="100px">Referatsleitung</td>
                  <td><span class="mitglied" id="{{referat.leitung.mitid}}">{{referat.leitung.name}}</span></td>
                </tr>
                <tr class="last-row">
                  <td>Stellvertretende Referatsleitung</td>
                  <td><span class="mitglied" id="{{bereich.stellvertretung.mitid}}">{{referat.stellvertretung.name}}</span></td>
                </tr>
              </tbody>
            </table>
            <ul class="collapsible">
              {% for bereich in referat.bereiche_set %}
              <li>
                <div class="collapsible-header grey lighten-2">{{bereich.name}}</div>
                <div class="collapsible-body">
                  <table>
                    <thead></thead>
                    <tbody>
                      <tr>
                        <td>Bereichsleitung</td>
                        <td><span class="mitglied" id="{{bereich.leitung.mitid}}">{{bereich.leitung.name}}</span></td>
                      </tr>
                      <tr>
                        <td>Stellvertretende Bereichsleitung</td>
                        <td><span class="mitglied" id="{{bereich.stellvertretung.mitid}}">{{bereich.stellvertretung.name}}</span></td>
                      </tr>
                      <tr class="last-row">
                        <td>Weitere Mitglieder</td>
                        <td>
                        {% for mitglied in bereich.weitere_mitglieder %}
                          <span class="mitglied" id="{{mitglied.mitid}}">{{mitglied.name}}</span><br>
                        {% endfor %}
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              {% endfor %}
            </li>
          </ul>
        </span>
      </div>
    </li>
    {% endfor %}
    </ul>
  </div>
</div>



<style>
  table {
    table-layout: fixed;
  }
  td {
    vertical-align: top;
  }

  tr.last-row{
    border-bottom: 0px;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('.collapsible');
    var options;
    var instances = M.Collapsible.init(elems, options);
  });
</script>

{% endblock %}
